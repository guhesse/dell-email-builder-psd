"use strict";var u=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var s=(n,o,e,t)=>{for(var i=t>1?void 0:t?m(o,e):o,d=n.length-1,l;d>=0;d--)(l=n[d])&&(i=(t?l(o,e,i):l(i))||i);return t&&i&&u(o,e,i),i};import{html as p,SizedMixin as h,SpectrumElement as f}from"@spectrum-web-components/base";import{property as r,query as v}from"@spectrum-web-components/base/src/decorators.js";import{ifDefined as S}from"@spectrum-web-components/base/src/directives.js";import{ResizeController as I}from"@lit-labs/observers/resize-controller.js";import g from"@spectrum-web-components/tabs/src/tabs-sizes.css.js";import b from"@spectrum-web-components/tabs/src/tabs.css.js";import{ScaledIndicator as a}from"@spectrum-web-components/tabs/src/Tabs.js";const c="transform: translateX(0px) scaleX(0) scaleY(0)";export class TopNav extends h(f){constructor(){super(...arguments);this.selectionIndicatorStyle=c;this.shouldAnimate=!1;this.quiet=!1;this.onClick=e=>{const t=e.target;this.shouldAnimate=!0,this.selectTarget(t)};this._items=[];this.resizeController=new I(this,{callback:()=>{this.updateSelectionIndicator()}});this.updateSelectionIndicator=async()=>{const e=this.items.find(i=>i.value===this.selected||i.value===window.location.href);if(!e){this.selectionIndicatorStyle=c;return}await Promise.all([e.updateComplete,document.fonts?document.fonts.ready:Promise.resolve()]);const{width:t}=e.getBoundingClientRect();this.selectionIndicatorStyle=a.transformX(e.offsetLeft,t)}}static get styles(){return[g,b,a.baseStyles()]}set selected(e){const t=this.selected;e!==t&&(this.updateCheckedState(e),this._selected=e,this.requestUpdate("selected",t))}get selected(){return this._selected}get items(){return this._items}set items(e){e!==this.items&&(this._items.forEach(t=>{this.resizeController.unobserve(t)}),e.forEach(t=>{this.resizeController.observe(t)}),this._items=e)}manageItems(){this.items=this.slotEl.assignedElements({flatten:!0}).filter(t=>t.localName==="sp-top-nav-item");const e=this.items.find(t=>t.value===window.location.href);e&&this.selectTarget(e)}render(){return p`
            <div @click=${this.onClick} id="list">
                <slot @slotchange=${this.onSlotChange}></slot>
                <div
                    id="selection-indicator"
                    class=${S(this.shouldAnimate?void 0:"first-position")}
                    style=${this.selectionIndicatorStyle}
                ></div>
            </div>
        `}firstUpdated(e){super.firstUpdated(e),this.setAttribute("direction","horizontal")}updated(e){super.updated(e),e.has("dir")&&this.updateSelectionIndicator(),!this.shouldAnimate&&typeof e.get("shouldAnimate")!="undefined"&&(this.shouldAnimate=!0)}selectTarget(e){const{value:t}=e;t&&(this.selected=t)}onSlotChange(){this.manageItems()}updateCheckedState(e){this.items.forEach(t=>{t.selected=!1}),requestAnimationFrame(()=>{if(e&&e.length){const t=this.items.find(i=>i.value===e||i.value===window.location.href);t?t.selected=!0:this.selected=""}this.updateSelectionIndicator()})}connectedCallback(){super.connectedCallback(),window.addEventListener("resize",this.updateSelectionIndicator),"fonts"in document&&document.fonts.addEventListener("loadingdone",this.updateSelectionIndicator)}disconnectedCallback(){window.removeEventListener("resize",this.updateSelectionIndicator),"fonts"in document&&document.fonts.removeEventListener("loadingdone",this.updateSelectionIndicator),super.disconnectedCallback()}}s([r({reflect:!0})],TopNav.prototype,"dir",2),s([r()],TopNav.prototype,"selectionIndicatorStyle",2),s([r({attribute:!1})],TopNav.prototype,"shouldAnimate",2),s([r({type:Boolean,reflect:!0})],TopNav.prototype,"quiet",2),s([r({reflect:!0})],TopNav.prototype,"selected",1),s([v("slot")],TopNav.prototype,"slotEl",2);
//# sourceMappingURL=TopNav.js.map
