"use strict";var p=Object.defineProperty;var b=Object.getOwnPropertyDescriptor;var o=(t,a,e,r)=>{for(var u=r>1?void 0:r?b(a,e):a,m=t.length-1,n;m>=0;m--)(n=t[m])&&(u=(r?n(a,e,u):n(u))||u);return r&&u&&p(a,e,u),u};import{property as i}from"@spectrum-web-components/base/src/decorators.js";import{Focusable as h}from"@spectrum-web-components/shared/src/focusable.js";import{LanguageResolutionController as g,languageResolverUpdatedSymbol as c}from"@spectrum-web-components/reactive-controllers/src/LanguageResolution.js";import{NumberFormatter as s}from"@internationalized/number";export const defaultNormalization={toNormalized(t,a,e){return(t-a)/(e-a)},fromNormalized(t,a,e){return t*(e-a)+a}};const f={fromAttribute:t=>t==="previous"?t:parseFloat(t),toAttribute:t=>t.toString()},d={fromAttribute:t=>t==="next"?t:parseFloat(t),toAttribute:t=>t.toString()};export class SliderHandle extends h{constructor(){super(...arguments);this._forcedUnit="";this.dragging=!1;this.highlight=!1;this.name="";this.label="";this.getAriaHandleText=(e,r)=>r.format(e);this.languageResolver=new g(this);this.normalization=defaultNormalization}get handleName(){return this.name}get focusElement(){var e,r;return(r=(e=this.handleController)==null?void 0:e.inputForHandle(this))!=null?r:this}update(e){var r,u;if(!this.hasUpdated){const{max:m,min:n}=this;this.value==null&&!isNaN(m)&&!isNaN(n)&&(this.value=m<n?n:n+(m-n)/2,(r=this.handleController)==null||r.hostUpdate())}(e.has("formatOptions")||e.has(c))&&delete this._numberFormatCache,e.has("value")&&e.get("value")!=null&&this.updateComplete.then(()=>{var n;(n=this.handleController)==null||n.setValueFromHandle(this)}),(u=this.handleController)==null||u.handleHasChanged(this),super.update(e)}firstUpdated(e){super.firstUpdated(e),this.dispatchEvent(new CustomEvent("sp-slider-handle-ready"))}dispatchInputEvent(){const e=new Event("input",{bubbles:!0,composed:!0});this.dispatchEvent(e)}getNumberFormat(){var e;if(!this._numberFormatCache||this.languageResolver.language!==this._numberFormatCache.language){let r;try{r=new s(this.languageResolver.language,this.formatOptions),this._forcedUnit=""}catch(u){const{style:m,unit:n,unitDisplay:v,...l}=this.formatOptions||{};m==="unit"&&(this._forcedUnit=n),r=new s(this.languageResolver.language,l)}this._numberFormatCache={language:this.languageResolver.language,numberFormat:r}}return(e=this._numberFormatCache)==null?void 0:e.numberFormat}get numberFormat(){if(this.formatOptions)return this.getNumberFormat()}}o([i({type:Number})],SliderHandle.prototype,"value",2),o([i({type:Boolean,reflect:!0})],SliderHandle.prototype,"dragging",2),o([i({type:Boolean})],SliderHandle.prototype,"highlight",2),o([i({type:String})],SliderHandle.prototype,"name",2),o([i({reflect:!0,converter:f})],SliderHandle.prototype,"min",2),o([i({reflect:!0,converter:d})],SliderHandle.prototype,"max",2),o([i({type:Number,reflect:!0})],SliderHandle.prototype,"step",2),o([i({type:Object,attribute:"format-options"})],SliderHandle.prototype,"formatOptions",2),o([i({type:String})],SliderHandle.prototype,"label",2),o([i({attribute:!1})],SliderHandle.prototype,"getAriaHandleText",2),o([i({attribute:!1})],SliderHandle.prototype,"normalization",2);
//# sourceMappingURL=SliderHandle.js.map
