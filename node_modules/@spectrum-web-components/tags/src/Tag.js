"use strict";var u=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var a=(l,i,e,s)=>{for(var t=s>1?void 0:s?h(i,e):i,o=l.length-1,d;o>=0;o--)(d=l[o])&&(t=(s?d(i,e,t):d(t))||t);return s&&t&&u(i,e,t),t};import{html as r,SizedMixin as c,SpectrumElement as p}from"@spectrum-web-components/base";import{property as n}from"@spectrum-web-components/base/src/decorators.js";import"@spectrum-web-components/button/sp-clear-button.js";import b from"./tag.css.js";export class Tag extends c(p,{validSizes:["s","m","l"]}){constructor(){super();this.deletable=!1;this.disabled=!1;this.readonly=!1;this.handleFocusin=()=>{this.addEventListener("focusout",this.handleFocusout),this.addEventListener("keydown",this.handleKeydown)};this.handleFocusout=()=>{this.removeEventListener("keydown",this.handleKeydown),this.removeEventListener("focusout",this.handleFocusout)};this.handleKeydown=e=>{if(!this.deletable)return;const{code:s}=e;switch(s){case"Backspace":case"Space":case"Delete":this.delete();return;default:return}};this.addEventListener("focusin",this.handleFocusin)}static get styles(){return[b]}get hasIcon(){return!!this.querySelector('[slot="icon"]')}get hasAvatar(){return!!this.querySelector('[slot="avatar"]')}delete(){this.readonly||this.dispatchEvent(new Event("delete",{bubbles:!0}))}render(){const e=[];return this.hasAvatar&&e.push(r`
                    <slot name="avatar"></slot>
                `),this.hasIcon&&e.push(r`
                    <slot name="icon"></slot>
                `),r`
            ${e}
            <span class="label"><slot></slot></span>
            ${this.deletable?r`
                      <sp-clear-button
                          class="clear-button"
                          ?disabled=${this.disabled}
                          label="Remove"
                          size="s"
                          tabindex="-1"
                          @click=${this.delete}
                      ></sp-clear-button>
                  `:r``}
        `}firstUpdated(e){super.firstUpdated(e),this.hasAttribute("role")||this.setAttribute("role","listitem"),this.deletable&&this.setAttribute("tabindex",!this.disabled&&this.matches(":first-of-type:not([disabled])")?"0":"-1")}updated(e){super.updated(e),e.has("disabled")&&(this.disabled?this.setAttribute("aria-disabled","true"):this.removeAttribute("aria-disabled"))}}a([n({type:Boolean,reflect:!0})],Tag.prototype,"deletable",2),a([n({type:Boolean,reflect:!0})],Tag.prototype,"disabled",2),a([n({type:Boolean,reflect:!0})],Tag.prototype,"readonly",2);
//# sourceMappingURL=Tag.js.map
