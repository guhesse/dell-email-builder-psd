"use strict";var u=Object.defineProperty;var d=Object.getOwnPropertyDescriptor;var a=(c,l,e,i)=>{for(var t=i>1?void 0:i?d(l,e):l,r=c.length-1,o;r>=0;r--)(o=c[r])&&(t=(i?o(l,e,t):o(t))||t);return i&&t&&u(l,e,t),t};import{html as p,nothing as m,SizedMixin as b,SpectrumElement as f}from"@spectrum-web-components/base";import{property as n,query as h}from"@spectrum-web-components/base/src/decorators.js";import"@spectrum-web-components/icons-ui/icons/sp-icon-asterisk100.js";import g from"@spectrum-web-components/icon/src/spectrum-icon-asterisk.css.js";import{conditionAttributeWithId as y,conditionAttributeWithoutId as v}from"@spectrum-web-components/base/src/condition-attribute-with-id.js";import{ElementResolutionController as E,elementResolverUpdatedSymbol as T}from"@spectrum-web-components/reactive-controllers/src/ElementResolution.js";import A from"./field-label.css.js";const s=class s extends b(f,{noDefaultSize:!0}){constructor(){super(...arguments);this.disabled=!1;this.id="";this.for="";this.required=!1;this.resolvedElement=new E(this)}static get styles(){return[A,g]}handleClick(e){if(!this.target||this.disabled||e.defaultPrevented)return;this.target.focus();const i=this.getRootNode(),t=this.target,r=t.getRootNode(),o=r.host;r===i&&t.forceFocusVisible?t.forceFocusVisible():o&&o.forceFocusVisible&&o.forceFocusVisible()}applyTargetLabel(e){if(this.target=e||this.target,this.target){const i=this.target.applyFocusElementLabel,t=this.target.focusElement||this.target,r=t.getRootNode();typeof i!="undefined"?i(this.labelText):r===this.getRootNode()?(e?y:v)(t,"aria-labelledby",[this.id]):e?t.setAttribute("aria-label",this.labelText):t.removeAttribute("aria-label")}}async manageTarget(){this.applyTargetLabel();const e=this.resolvedElement.element;if(!e){this.target=e;return}e.localName.search("-")>0&&await customElements.whenDefined(e.localName),typeof e.updateComplete!="undefined"&&await e.updateComplete,this.applyTargetLabel(e)}get labelText(){const e=this.slotEl.assignedNodes({flatten:!0});return e.length?e.map(t=>(t.textContent||"").trim()).join(" "):""}render(){return p`
            <label>
                <slot></slot>
                ${this.required?p`
                          <sp-icon-asterisk100
                              class="required-icon spectrum-UIIcon-Asterisk100"
                          ></sp-icon-asterisk100>
                      `:m}
            </label>
        `}firstUpdated(e){super.firstUpdated(e),this.addEventListener("click",this.handleClick)}willUpdate(e){this.hasAttribute("id")||this.setAttribute("id",`${this.tagName.toLowerCase()}-${s.instanceCount++}`),e.has("for")&&(this.resolvedElement.selector=this.for?`#${this.for}`:""),(e.has("id")||e.has(T))&&this.manageTarget()}};s.instanceCount=0,a([n({type:Boolean,reflect:!0})],s.prototype,"disabled",2),a([n({type:String})],s.prototype,"id",2),a([n({type:String})],s.prototype,"for",2),a([n({type:Boolean,reflect:!0})],s.prototype,"required",2),a([h("slot")],s.prototype,"slotEl",2),a([n({type:String,reflect:!0,attribute:"side-aligned"})],s.prototype,"sideAligned",2);export let FieldLabel=s;
//# sourceMappingURL=FieldLabel.js.map
