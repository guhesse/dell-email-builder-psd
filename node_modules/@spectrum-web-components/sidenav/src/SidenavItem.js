"use strict";var h=Object.defineProperty;var u=Object.getOwnPropertyDescriptor;var n=(p,r,e,t)=>{for(var i=t>1?void 0:t?u(r,e):r,a=p.length-1,l;a>=0;a--)(l=p[a])&&(i=(t?l(r,e,i):l(i))||i);return t&&i&&h(r,e,i),i};import{html as d}from"@spectrum-web-components/base";import{property as o}from"@spectrum-web-components/base/src/decorators.js";import{ifDefined as s}from"@spectrum-web-components/base/src/directives.js";import{LikeAnchor as v}from"@spectrum-web-components/shared/src/like-anchor.js";import{Focusable as f}from"@spectrum-web-components/shared/src/focusable.js";import m from"./sidenav-item.css.js";const c=class extends v(f){constructor(){super(...arguments);this.value=void 0;this.selected=!1;this.expanded=!1}static get styles(){return[m]}get parentSideNav(){return this._parentSidenav||(this._parentSidenav=this.closest("sp-sidenav")),this._parentSidenav}get hasChildren(){return!!this.querySelector("sp-sidenav-item")}get depth(){let e=0,t=this.parentElement;for(;t instanceof c;)e++,t=t.parentElement;return e}handleSideNavSelect(e){this.selected=e.target===this}handleClick(e){!this.href&&e&&e.preventDefault(),this.disabled||(this.hasChildren?this.expanded=!this.expanded:this.value&&this.announceSelected(this.value))}announceSelected(e){const t={value:e},i=new CustomEvent("sidenav-select",{bubbles:!0,composed:!0,detail:t});this.dispatchEvent(i)}click(){this.handleClick()}get focusElement(){return this.shadowRoot.querySelector("#item-link")}update(e){this.hasAttribute("slot")||(this.slot="descendant"),super.update(e)}render(){return d`
            <a
                href=${this.href||"#"}
                target=${s(this.target)}
                download=${s(this.download)}
                rel=${s(this.rel)}
                data-level="${this.depth}"
                @click="${this.handleClick}"
                id="item-link"
                aria-current=${s(this.selected&&this.href?"page":void 0)}
            >
                <slot name="icon"></slot>
                ${this.label}
                <slot></slot>
            </a>
            ${this.expanded?d`
                      <slot name="descendant"></slot>
                  `:d``}
        `}updated(e){this.hasChildren&&this.expanded&&!this.selected&&(this.focusElement.tabIndex=-1),super.updated(e)}connectedCallback(){super.connectedCallback(),this.startTrackingSelection()}disconnectedCallback(){this.stopTrackingSelection(),super.disconnectedCallback()}async startTrackingSelection(){const e=this.parentSideNav;e&&(await e.updateComplete,e.startTrackingSelectionForItem(this),this.selected=this.value!=null&&this.value===e.value)}stopTrackingSelection(){const e=this.parentSideNav;e&&e.stopTrackingSelectionForItem(this),this._parentSidenav=void 0}};export let SideNavItem=c;n([o()],SideNavItem.prototype,"value",2),n([o({type:Boolean,reflect:!0})],SideNavItem.prototype,"selected",2),n([o({type:Boolean,reflect:!0})],SideNavItem.prototype,"expanded",2);
//# sourceMappingURL=SidenavItem.js.map
