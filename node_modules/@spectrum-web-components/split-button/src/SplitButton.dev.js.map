{
  "version": 3,
  "sources": ["SplitButton.ts"],
  "sourcesContent": ["/*\nCopyright 2020 Adobe. All rights reserved.\nThis file is licensed to you under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License. You may obtain a copy\nof the License at http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software distributed under\nthe License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\nOF ANY KIND, either express or implied. See the License for the specific language\ngoverning permissions and limitations under the License.\n*/\n\nimport {\n    CSSResultArray,\n    DefaultElementSize,\n    html,\n    PropertyValues,\n    SizedMixin,\n    TemplateResult,\n} from '@spectrum-web-components/base';\nimport {\n    property,\n    query,\n} from '@spectrum-web-components/base/src/decorators.js';\nimport { ifDefined } from '@spectrum-web-components/base/src/directives.js';\n\nimport '@spectrum-web-components/popover/sp-popover.js';\nimport '@spectrum-web-components/menu/sp-menu.js';\nimport '@spectrum-web-components/button/sp-button.js';\nimport { ButtonVariants } from '@spectrum-web-components/button';\nimport { PickerBase } from '@spectrum-web-components/picker';\nimport '@spectrum-web-components/icons-ui/icons/sp-icon-chevron100.js';\nimport '@spectrum-web-components/icons-workflow/icons/sp-icon-more.js';\nimport chevronStyles from '@spectrum-web-components/icon/src/spectrum-icon-chevron.css.js';\nimport styles from './split-button.css.js';\n\nconst chevronClass = {\n    s: 'spectrum-UIIcon-ChevronDown75',\n    m: 'spectrum-UIIcon-ChevronDown100',\n    l: 'spectrum-UIIcon-ChevronDown200',\n    xl: 'spectrum-UIIcon-ChevronDown300',\n};\n\nexport type SplitButtonTypes = 'field' | 'more';\n\n/**\n * @element sp-split-button\n *\n * @slot - menu items to be listed in the Button\n * @slot tooltip - Tooltip to to be applied to the the main Button\n **/\nexport class SplitButton extends SizedMixin(PickerBase) {\n    public static override get styles(): CSSResultArray {\n        return [styles, chevronStyles];\n    }\n\n    @property({ type: Boolean, reflect: true })\n    public left = false;\n\n    /**\n     * The visual variant to apply to this button.\n     */\n    @property({ reflect: true })\n    public variant: ButtonVariants = 'accent';\n\n    @property({ type: String })\n    public type: SplitButtonTypes = 'field';\n\n    @query('.trigger')\n    private trigger!: HTMLButtonElement;\n\n    protected override listRole: 'listbox' | 'menu' = 'menu';\n    protected override itemRole = 'menuitem';\n\n    public override get focusElement(): HTMLElement {\n        if (this.open) {\n            return this.optionsMenu;\n        }\n        if (this.left) {\n            return this.trigger;\n        }\n        return this.button;\n    }\n\n    private passClick(): void {\n        const target =\n            this.type === 'more'\n                ? this.menuItems[0]\n                : this.selectedItem || this.menuItems[0];\n        if (target) {\n            target.click();\n        }\n    }\n\n    protected override get buttonContent(): TemplateResult[] {\n        return [\n            html`\n                <div\n                    id=\"label\"\n                    role=\"presentation\"\n                    class=${ifDefined(this.value ? undefined : 'placeholder')}\n                >\n                    ${this.selectedItem?.itemText || ''}\n                </div>\n                <slot name=\"tooltip\"></slot>\n            `,\n        ];\n    }\n\n    protected override update(changes: PropertyValues<this>): void {\n        if (changes.has('type')) {\n            if (this.type === 'more') {\n                this.selects = undefined;\n            } else {\n                this.selects = 'single';\n            }\n        }\n        super.update(changes);\n    }\n\n    protected override render(): TemplateResult {\n        const treatment = ['cta', 'accent'].includes(this.variant)\n            ? 'fill'\n            : 'outline';\n        const buttons: TemplateResult[] = [\n            html`\n                <sp-button\n                    aria-label=${ifDefined(this.label || undefined)}\n                    id=\"button\"\n                    class=\"button ${this.variant}\"\n                    @click=${this.passClick}\n                    ?disabled=${this.disabled}\n                    variant=${this.variant}\n                    treatment=${treatment}\n                    size=${this.size}\n                >\n                    ${this.buttonContent}\n                </sp-button>\n            `,\n            html`\n                <sp-button\n                    aria-haspopup=\"true\"\n                    aria-expanded=${this.open ? 'true' : 'false'}\n                    aria-controls=${ifDefined(this.open ? 'menu' : undefined)}\n                    class=\"button trigger ${this.variant}\"\n                    @blur=${this.handleButtonBlur}\n                    @pointerdown=${this.handleButtonPointerdown}\n                    @focus=${this.handleButtonFocus}\n                    @click=${this.handleButtonClick}\n                    @keydown=${{\n                        handleEvent: this.handleEnterKeydown,\n                        capture: true,\n                    }}\n                    ?disabled=${this.disabled}\n                    aria-labelledby=\"button\"\n                    variant=${this.variant}\n                    treatment=${treatment}\n                    size=${this.size}\n                >\n                    ${this.type === 'field'\n                        ? html`\n                              <sp-icon-chevron100\n                                  class=\"icon ${chevronClass[\n                                      this.size as DefaultElementSize\n                                  ]}\"\n                                  slot=\"icon\"\n                              ></sp-icon-chevron100>\n                          `\n                        : html`\n                              <sp-icon-more\n                                  class=\"icon\"\n                                  slot=\"icon\"\n                              ></sp-icon-more>\n                          `}\n                </sp-button>\n            `,\n        ];\n        if (this.left) {\n            buttons.reverse();\n        }\n        return html`\n            ${buttons} ${this.renderMenu}\n        `;\n    }\n\n    protected override bindButtonKeydownListener(): void {\n        this.trigger.addEventListener('keydown', this.handleKeydown);\n    }\n\n    protected override async manageSelection(): Promise<void> {\n        await this.manageSplitButtonItems();\n        await super.manageSelection();\n    }\n\n    private async manageSplitButtonItems(): Promise<void> {\n        if (!this.menuItems.length) {\n            await this.optionsMenu.updateComplete;\n            if (!this.menuItems.length) {\n                return;\n            }\n        }\n\n        if (this.type === 'more') {\n            this.menuItems[0].hidden = true;\n            this.menuItems.forEach((el) => (el.selected = false));\n            this.selectedItem = this.menuItems[0];\n        } else {\n            this.selectedItem = this.selectedItem || this.menuItems[0];\n        }\n        this.value = this.selectedItem.value;\n    }\n}\n"],
  "mappings": ";;;;;;;;;;;;AAYA;AAAA,EAGI;AAAA,EAEA;AAAA,OAEG;AACP;AAAA,EACI;AAAA,EACA;AAAA,OACG;AACP,SAAS,iBAAiB;AAE1B,OAAO;AACP,OAAO;AACP,OAAO;AAEP,SAAS,kBAAkB;AAC3B,OAAO;AACP,OAAO;AACP,OAAO,mBAAmB;AAC1B,OAAO,YAAY;AAEnB,MAAM,eAAe;AAAA,EACjB,GAAG;AAAA,EACH,GAAG;AAAA,EACH,GAAG;AAAA,EACH,IAAI;AACR;AAUO,aAAM,oBAAoB,WAAW,UAAU,EAAE;AAAA,EAAjD;AAAA;AAMH,SAAO,OAAO;AAMd,SAAO,UAA0B;AAGjC,SAAO,OAAyB;AAKhC,SAAmB,WAA+B;AAClD,SAAmB,WAAW;AAAA;AAAA,EApB9B,WAA2B,SAAyB;AAChD,WAAO,CAAC,QAAQ,aAAa;AAAA,EACjC;AAAA,EAoBA,IAAoB,eAA4B;AAC5C,QAAI,KAAK,MAAM;AACX,aAAO,KAAK;AAAA,IAChB;AACA,QAAI,KAAK,MAAM;AACX,aAAO,KAAK;AAAA,IAChB;AACA,WAAO,KAAK;AAAA,EAChB;AAAA,EAEQ,YAAkB;AACtB,UAAM,SACF,KAAK,SAAS,SACR,KAAK,UAAU,CAAC,IAChB,KAAK,gBAAgB,KAAK,UAAU,CAAC;AAC/C,QAAI,QAAQ;AACR,aAAO,MAAM;AAAA,IACjB;AAAA,EACJ;AAAA,EAEA,IAAuB,gBAAkC;AA9F7D;AA+FQ,WAAO;AAAA,MACH;AAAA;AAAA;AAAA;AAAA,4BAIgB,UAAU,KAAK,QAAQ,SAAY,aAAa,CAAC;AAAA;AAAA,wBAEvD,UAAK,iBAAL,mBAAmB,aAAY,EAAE;AAAA;AAAA;AAAA;AAAA,IAI/C;AAAA,EACJ;AAAA,EAEmB,OAAO,SAAqC;AAC3D,QAAI,QAAQ,IAAI,MAAM,GAAG;AACrB,UAAI,KAAK,SAAS,QAAQ;AACtB,aAAK,UAAU;AAAA,MACnB,OAAO;AACH,aAAK,UAAU;AAAA,MACnB;AAAA,IACJ;AACA,UAAM,OAAO,OAAO;AAAA,EACxB;AAAA,EAEmB,SAAyB;AACxC,UAAM,YAAY,CAAC,OAAO,QAAQ,EAAE,SAAS,KAAK,OAAO,IACnD,SACA;AACN,UAAM,UAA4B;AAAA,MAC9B;AAAA;AAAA,iCAEqB,UAAU,KAAK,SAAS,MAAS,CAAC;AAAA;AAAA,oCAE/B,KAAK,OAAO;AAAA,6BACnB,KAAK,SAAS;AAAA,gCACX,KAAK,QAAQ;AAAA,8BACf,KAAK,OAAO;AAAA,gCACV,SAAS;AAAA,2BACd,KAAK,IAAI;AAAA;AAAA,sBAEd,KAAK,aAAa;AAAA;AAAA;AAAA,MAG5B;AAAA;AAAA;AAAA,oCAGwB,KAAK,OAAO,SAAS,OAAO;AAAA,oCAC5B,UAAU,KAAK,OAAO,SAAS,MAAS,CAAC;AAAA,4CACjC,KAAK,OAAO;AAAA,4BAC5B,KAAK,gBAAgB;AAAA,mCACd,KAAK,uBAAuB;AAAA,6BAClC,KAAK,iBAAiB;AAAA,6BACtB,KAAK,iBAAiB;AAAA,+BACpB;AAAA,QACP,aAAa,KAAK;AAAA,QAClB,SAAS;AAAA,MACb,CAAC;AAAA,gCACW,KAAK,QAAQ;AAAA;AAAA,8BAEf,KAAK,OAAO;AAAA,gCACV,SAAS;AAAA,2BACd,KAAK,IAAI;AAAA;AAAA,sBAEd,KAAK,SAAS,UACV;AAAA;AAAA,gDAEsB,aACV,KAAK,IACT,CAAC;AAAA;AAAA;AAAA,8BAIT;AAAA;AAAA;AAAA;AAAA;AAAA,2BAKC;AAAA;AAAA;AAAA,IAGnB;AACA,QAAI,KAAK,MAAM;AACX,cAAQ,QAAQ;AAAA,IACpB;AACA,WAAO;AAAA,cACD,OAAO,IAAI,KAAK,UAAU;AAAA;AAAA,EAEpC;AAAA,EAEmB,4BAAkC;AACjD,SAAK,QAAQ,iBAAiB,WAAW,KAAK,aAAa;AAAA,EAC/D;AAAA,EAEA,MAAyB,kBAAiC;AACtD,UAAM,KAAK,uBAAuB;AAClC,UAAM,MAAM,gBAAgB;AAAA,EAChC;AAAA,EAEA,MAAc,yBAAwC;AAClD,QAAI,CAAC,KAAK,UAAU,QAAQ;AACxB,YAAM,KAAK,YAAY;AACvB,UAAI,CAAC,KAAK,UAAU,QAAQ;AACxB;AAAA,MACJ;AAAA,IACJ;AAEA,QAAI,KAAK,SAAS,QAAQ;AACtB,WAAK,UAAU,CAAC,EAAE,SAAS;AAC3B,WAAK,UAAU,QAAQ,CAAC,OAAQ,GAAG,WAAW,KAAM;AACpD,WAAK,eAAe,KAAK,UAAU,CAAC;AAAA,IACxC,OAAO;AACH,WAAK,eAAe,KAAK,gBAAgB,KAAK,UAAU,CAAC;AAAA,IAC7D;AACA,SAAK,QAAQ,KAAK,aAAa;AAAA,EACnC;AACJ;AA1JW;AAAA,EADN,SAAS,EAAE,MAAM,SAAS,SAAS,KAAK,CAAC;AAAA,GALjC,YAMF;AAMA;AAAA,EADN,SAAS,EAAE,SAAS,KAAK,CAAC;AAAA,GAXlB,YAYF;AAGA;AAAA,EADN,SAAS,EAAE,MAAM,OAAO,CAAC;AAAA,GAdjB,YAeF;AAGC;AAAA,EADP,MAAM,UAAU;AAAA,GAjBR,YAkBD;",
  "names": []
}
